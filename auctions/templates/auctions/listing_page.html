{% extends template %}

{% block title %} {{listing.title}} {% endblock %}

{% block body %}

    <form action="{% url 'finish_auction' listing.pk  %}" method="post">
        {% csrf_token %}
        {% if owner and listing.auction_status %}
            <input type="submit" name="auction_status" value="Close Auction" style="background-color: red; color: white; border-radius: 3px; border: 1px solid red; padding: 4px 9px 4px 9px;">
        {% endif %}

    </form>
    <h1>{{listing}}</h1>
    {% if message %}
        <h2 style="color: red;">{{message}}</h2>
    {% endif %}

    <br>
    <img src="{{listing.img_url}}" alt="Image Url" height="200" width="300">
    <br>

    <p>{{listing.description}}</p>

    <h3>${{listing.starting_bid}}</h3>

    {% if request.user == listing.first_bid.first.bid_user and listing.auction_status%}
        <p style="font-size: 14px;">Total Bidings: {{listing.total_bidings}}. Your bid is the current bid.</p>
    {% else %}
        <p style="font-size: 14px;">Total Bidings: {{listing.total_bidings}}</p>
    {% endif %}
    {% if listing.auction_status %}
        <form action="{% url 'listing_page' listing.pk %}" method="post">
            {% csrf_token %}
            <div style="margin-bottom: 10px; margin-top: -15px;">
                <input type="number" required name="new_bid" min="0" step=".01" placeholder="Bid">
            </div>
            <input type="submit" value="Place Bid" style="background-color: rgb(83, 127, 185); color: white; border-radius: 3px; border: 1px solid rgb(83, 127, 185); padding: 4px 9px 4px 9px;">
        </form>
    {% endif %}
    <br>
    <h3>Details</h3>
    <ul>
        <li>Listed by: {{listing.owner.first}}</li>
        <li>Category: </li>
    </ul>

{% endblock %}